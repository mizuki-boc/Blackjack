## 開発に関して(一般)
- about.md に基づいてコーディング
    - これ結構効率良さげ、コーディング時に迷わない。
- コーディングする前にもう少し細かく実装の流れを書き出した方がいいかも．
    - 次になにを実装すべきかとか見えるので，効率化できそう．
    - 今回はゲームのフローを書き出したけど，実際はゲームフロー通りに実装していった方が良いのか，別に実装した方がいいのかとかもう少し考える．
        - 今回，デバッグする時に結果がわかりにくかったので，『清算』フェーズから実装した方がよかったかも．
- 勝敗に関して，テストは必要．
    - デバッグはプレイしながらやろうと思ったけど，細かな修正時もいちいちプレイしてられない．

## ゲームフローに関して
- 各インスタンス生成
- プレイヤーにカードを配る ***
- ディーラーにカードを配る
    - 内一枚は伏せる
    - A の場合、インシュランス選択 ***
    - ブラックジャックだった場合のみオープンする
- プレイヤーのベット金額を決定する ***
- プレイヤーのアクション ***
    - insurance に関して
        - BJ でない　かつ　bet ins = ベット額没収
        - BJ でない　かつ　no ins = 何もしない
        - BJ かつ　bet ins = ３倍リターン
        - BJ かつ　no ins = 何もしない．
        - insurance した時は player.bet_insurance = True
        - 金額の調整は最後の精算時にまとめて行う．
    - surrender に関して
        - surrender した時は insurance 同様，player.bet_surrender = True
        - 金額の調整は最後の精算時にまとめて行う．
- ディーラーのアクション
- 清算
    - 両方 BJ
        - Push
    - プレイヤーのみ BJ
        - pay 3 to 2 or pay 6 to 5
    - ディーラーのみ BJ
        - bet 額没収
    - 両方 burst していない場合
        - 大きい方の勝ち
    - プレイヤーが　burst
        - bet 額没収
    - ディーラーが burst
        - burst していないプレイヤーのみ　勝利．
(*** はプレイヤー人数に応じてループする)

## クラスに関して
- デッキクラス
    - プロパティ
        - デッキサイズ
        - (Joker 含むか(Black Jack では使用しないが、汎用性のため))
    - メソッド
        - デッキ生成(初期化)
        - ドロー
        - シャッフル
        - (確率計算・カウンティング)

- プレイヤークラス
    - プロパティ
        - バンクロール
        - ハンド
        - 名前
            - もっとプロフィール情報をつけても面白いかも．
    - メソッド
        - ベット (強制なので不要？？)
        - (S)スタンド
            - ターン終了
        - (H)ヒット
            - 一枚追加．S,H から選択
        - (D)ダブル
            - bet = bet * 2
            - 次のアクションで終了 かつ (ヒット or スタンド)
        - (P)スプリット　***
            - 同じ数字の時のみ．手札配列の変形
            - エースのスプリットの場合はブラックジャックにはならない．
        - (I)インシュランス ***
            - ディーラのカードが A の時のみ．
            - 最初の bet の半額を bet. 配当は 3 倍
        - (U)サレンダー ***
            - bet の半額を返却．勝負に参加しない．
        ~~*** は考え中、メソッドでなくて、イベントとして関数化してもいいかも~~
        main 処理の途中で行うことにした．surrender は，予定通りメソッドに組み込む．

- ディーラークラス
    - プロパティ
        - ハンド
    - メソッド
        - アクション
            - ハンドのスコア確認 (calc_hand)
                - 17 以上で stand (17 の場合も含む)
                - 17 以下で hit 
        
## ゲームサーバーに関して(参考URL)
- [pythonのgeventとやらでwebsocket](https://blanktar.jp/blog/2014/05/python-gevent-websocket)
- [WebSocketsでチャットを作ってみる！](http://python.matrix.jp/pages/web/chat_sample.html)

## 実装ログ
- 7/10
    - pyBlackJack.py をばらして、web app に流用できるような形にしたい
    - about.txt に基づいてコーディング
        - これ結構効率良さげ、コーディング時に迷わない。
    - 次回
        - プレーヤーのアクションから始める
        - 一通り CLI でプレイできるようにしたい。

- 7/31
    - プレイヤーアクション選択時に実行可能アクションをフラグとして関数に渡す． 
        - 辞書型にして， ** をつけると，"引数": "値" と認識して代入してくれる．(超便利)
    - プレイヤークラスのメソッドの実装．
        - split, insurance　はメソッドから外し，split のみゲームの処理の一部として実装した．
    - 次回
        - insurance, surrender の実装
        - ディーラーのアクション以降の実装

- 8/7
    - 前回 (7/31) の実装に関して， Player クラスの hit 時に， ```self.hand.append(deck.draw())``` みたいにしてるのがなんか違和感．インスタンスのスコープはどうなってるの？
    - y/n とか キー入力を求める時の，誤入力に関するエラーハンドリングはどうする？？
    - insurance に関して
        - insurance 可能タイミングで，プレイヤーに y/n で選択させる．
        - 清算フェーズで フラグが立っているプレイヤーはディーラーのハンドによって処理する．
    - ベット金額決定時のリファクタリング
        - ```for i in range(players):``` みたいな感じになってたので，```for p in players:``` に変更．
    - Player クラスの bet メソッドに関して
        - メソッド実行時にバンクロールから bet 額を差し引いているが，これは清算時に差し引きでもいいかも．
            - そのほうがいいっぽいからそうした．(insurance もそんな感じの実装になりそうだから．)
    - player_bet_amount に関して
        - いる？？？
        - player クラスにひもづけてるからいらない気がする．
            - 結局いらんっぽいから消した．
    - バンクロールに関して
        - これインスタンス生成時に 1000 で初期化してるけど，最終的にどうするの
        - web ゲームにしたいから，DB 連携を想定してる．
        - 案１: player クラスのコンストラクタ引数にとって，DB から読む
            - 名前，そのほかの情報にかんしても同様にする．
